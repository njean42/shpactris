[gd_scene load_steps=12 format=2]

[ext_resource path="res://assets/controller/kbd_ship.png" type="Texture" id=1]
[ext_resource path="res://assets/controller/2p_pacman.png" type="Texture" id=2]
[ext_resource path="res://assets/ship.png" type="Texture" id=3]
[ext_resource path="res://assets/controller/kbd_pacman.png" type="Texture" id=4]
[ext_resource path="res://assets/controller/2p_ship.png" type="Texture" id=5]
[ext_resource path="res://assets/pacman.png" type="Texture" id=6]
[ext_resource path="res://assets/controller/1p.png" type="Texture" id=7]

[sub_resource type="GDScript" id=4]
script/source = "extends Node2D



func _ready():
	
	$\"center/bt-continue\".grab_focus()
	
	for m in $'modes'.get_children():
		m.visible = false
	
	var mode_1p = global.PLAYERS.ship == global.PLAYERS.pacman
	
	# solo on controller
	if mode_1p and global.PLAYERS.ship != null:
		$'modes/1p_controller'.visible = true
	
	#Â solo on keyboard
	elif mode_1p:
		$'modes/1p_kbd'.visible = true
	
	# 2p mode on controllers
	elif global.PLAYERS.ship != null and global.PLAYERS.pacman != null:
		$'modes/2p_controllers'.visible = true
	
	# 2p mode, controller for the ship
	elif global.PLAYERS.ship != null:
		$'modes/2p_controller_ship'.visible = true
	
	# 2p mode, controller for pacman
	else:
		$'modes/2p_controller_pacman'.visible = true

"

[sub_resource type="DynamicFontData" id=1]
font_path = "res://assets/DejaVuSans-Bold.ttf"

[sub_resource type="DynamicFont" id=2]
size = 28
font_data = SubResource( 1 )

[sub_resource type="GDScript" id=3]
script/source = "extends Button


func _on_btcontinue_pressed():
	get_tree().change_scene(\"res://scenes/world.tscn\")
"

[node name="controls" type="Node2D"]
script = SubResource( 4 )

[node name="modes" type="Node2D" parent="."]

[node name="2p_controllers" type="Node2D" parent="modes"]
visible = false

[node name="2p_pacman" type="Sprite" parent="modes/2p_controllers"]
position = Vector2( 300.097, 464.82 )
scale = Vector2( 0.972279, 0.972279 )
texture = ExtResource( 2 )

[node name="2p_ship" type="Sprite" parent="modes/2p_controllers"]
position = Vector2( 289.743, 173.591 )
texture = ExtResource( 5 )

[node name="2p_controller_pacman" type="Node2D" parent="modes"]
visible = false

[node name="ship" type="Sprite" parent="modes/2p_controller_pacman"]
position = Vector2( 124.762, 93.0807 )
texture = ExtResource( 3 )

[node name="kbd_ship" type="Sprite" parent="modes/2p_controller_pacman"]
position = Vector2( 278.283, 175.388 )
texture = ExtResource( 1 )

[node name="2p_pacman" type="Sprite" parent="modes/2p_controller_pacman"]
position = Vector2( 300.097, 464.82 )
scale = Vector2( 0.972279, 0.972279 )
texture = ExtResource( 2 )

[node name="2p_controller_ship" type="Node2D" parent="modes"]
visible = false

[node name="2p_ship" type="Sprite" parent="modes/2p_controller_ship"]
position = Vector2( 289.743, 173.591 )
texture = ExtResource( 5 )

[node name="pacman" type="Sprite" parent="modes/2p_controller_ship"]
position = Vector2( 462.097, 418.349 )
texture = ExtResource( 6 )

[node name="kbd_pacman" type="Sprite" parent="modes/2p_controller_ship"]
position = Vector2( 297.083, 493.255 )
texture = ExtResource( 4 )

[node name="1p_controller" type="Node2D" parent="modes"]
visible = false

[node name="1p" type="Sprite" parent="modes/1p_controller"]
position = Vector2( 299.413, 304.108 )
scale = Vector2( 0.850314, 0.850314 )
texture = ExtResource( 7 )

[node name="1p_kbd" type="Node2D" parent="modes"]
visible = false

[node name="ship2" type="Sprite" parent="modes/1p_kbd"]
position = Vector2( 124.762, 113.081 )
texture = ExtResource( 3 )

[node name="kbd_ship2" type="Sprite" parent="modes/1p_kbd"]
position = Vector2( 278.283, 195.388 )
texture = ExtResource( 1 )

[node name="pacman2" type="Sprite" parent="modes/1p_kbd"]
position = Vector2( 462.097, 388.349 )
texture = ExtResource( 6 )

[node name="kbd_pacman2" type="Sprite" parent="modes/1p_kbd"]
position = Vector2( 297.083, 463.255 )
texture = ExtResource( 4 )

[node name="center" type="CenterContainer" parent="."]
margin_left = 1.0
margin_top = 645.0
margin_right = 598.0
margin_bottom = 720.0
__meta__ = {
"_edit_use_anchors_": false
}

[node name="bt-continue" type="Button" parent="center"]
margin_left = 211.0
margin_top = 18.0
margin_right = 385.0
margin_bottom = 57.0
custom_fonts/font = SubResource( 2 )
text = "CONTINUE"
script = SubResource( 3 )
[connection signal="pressed" from="center/bt-continue" to="center/bt-continue" method="_on_btcontinue_pressed"]
